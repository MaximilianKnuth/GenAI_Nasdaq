2025-06-07 18:17:59,203 - debug_script - INFO - Attempting to import and run the backend server...
2025-06-07 18:17:59,204 - debug_script - INFO - Backend main path: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/backend/main.py
2025-06-07 18:17:59,204 - debug_script - INFO - Module spec created, executing module...
2025-06-07 18:18:00,386 - numexpr.utils - INFO - NumExpr defaulting to 8 threads.
2025-06-07 18:18:04,429 - DataProcessingApp - INFO - üöÄ  Logging initialised ‚Äì console + logs/app.log
2025-06-07 18:18:04,429 - backend_main - INFO - Successfully imported DataProcessingApp from parent main.py
2025-06-07 18:18:04,430 - debug_script - INFO - Starting backend server on host 0.0.0.0, port 9000...
üöÄ  Logging initialised ‚Äì console + logs/app.log

üîë API Key Configuration
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Please enter your Deepseek API key: 2025-06-07 18:18:09,218 - DataProcessingApp - INFO - Loading data files from /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data
2025-06-07 18:18:09,219 - DataProcessingApp - INFO - Found data file: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data/EFR.csv
2025-06-07 18:18:09,219 - DataProcessingApp - INFO - Found data file: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data/EQR.csv
2025-06-07 18:18:09,219 - DataProcessingApp - INFO - Found data file: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data/SKMS.csv
‚ö†Ô∏è  Running in WebSocket mode - using default API keys

üñº  ASCII graph

                                                                                                                                             +-----------+                                                                                                                                                 
                                                                                                                                             | __start__ |                                                                                                                                                 
                                                                                                                                             +-----------+                                                                                                                                                 
                                                                                                                                                    *                                                                                                                                                      
                                                                                                                                                    *                                                                                                                                                      
                                                                                                                                                    *                                                                                                                                                      
                                                                                                                                          +------------------+...........                                                                                                                                  
                                                                                                                                        ..| first_run_router |......     ....................                                                                                                              
                                                                                                                                 .......  +------------------+      .........                .....................                                                                                         
                                                                                                                        .........                                            ...........                          .....................                                                                    
                                                                                                                 .......                                                                .........                                      .....................                                               
                                                                                                            .....                                                                                ...........                                                ....................                           
                                                                                              +-------------+*******                                                                                        .....                                                               ...........                
                                                                                          ....| human_input |....   ****************                                                                            .                                                                         .                
                                                                               ...........    +-------------+    .......            ***************                                                             .                                                                         .                
                                                                      .........                                         .........                  ****************                                             .                                                                         .                
                                                           ...........                                                           .......                           ***************                              .                                                                         .                
                                                  .........                                                                             .........                                 ****************              .                                                                         .                
                                            ......                                                                                               ....                                        .....******+-------------+                                                       +---------------------+      
                                            .                                                                                                       .                ........................       ....| task_router |                                                       | task_classification |      
                                            .                                                                                               .........................                    ...........    +-------------+****                                                   +---------------------+      
                                            .                                                                       ........................        .                         ...........                                  *****                                                 ...            ...        
                                            .                                              .........................                                .              ...........                                                  *****                                          ..                  ...     
                                            .                      ........................                                                         .        ......                                                                  ****                                    ..                       ..   
                                  +-------------------+................                                                                   +-----------------+.........                                                                   *****                  +-------------------+                  ... 
                                  | router_join_table |.....           ..................................                                 | router_timezone |.........................                                                        *****             | split_query_agent |             .....    
                                ..+-------------------+***  ..........                                   .................................+-----------------+  *******............... .................                                            ******       +-------------------+        .....         
                          ......             .            *****       ...........                                           .......        ..................................        ................. .................                                 *****            *            ......              
                     .....                   .                 *****             ..........                          .......              ..                ..               ........................................   .................                     *****       *       .....                    
                  ...                         .                     ******                 ......                ....                   ..                    ..                    *******                    ..........................................          ***    *    ...                         
+-----------------------+                     .                           ***                   +-----------------+           +--------------+           +---------------+                 ****                                       ........   ................+----------------+                        
| join_table_rag_lookup |                     .                     ******                      | code_generation |           | tz_extractor |******     | tz_rag_lookup |                     *                                   .......                       | llm_first_pass |                        
+-----------------------+*                   .                 *****                            +-----------------+           +--------------+      *****+---------------+******                *                            ......                              +----------------+                        
                          ******             .            *****                                           *                                                    ***********      ******           *                    .......                                                                              
                                *****       .       ******                                                *                                                               *********** ******      *            .......                                                                                     
                                     ***    .    ***                                                      *                                                                          ****** ***    *       ....                                                                                            
                                  +------------------+                                              +---------+                                                                    +---------------------------------+                                                                                     
                                  | join_table_check |                                              | __end__ |                                                                    | existence_and_column_type_check |                                                                                     
                                  +------------------+                                              +---------+                                                                    +---------------------------------+                                                                                     2025-06-07 18:18:09,471 - backend_main - INFO - Created DataProcessingApp instance for client 127.0.0.1:52290
2025-06-07 18:18:09,471 - backend_main - INFO - Client connected: 127.0.0.1:52290. Total connections: 1
2025-06-07 18:18:09,472 - backend_main - ERROR - Error sending message to 127.0.0.1:52290: 
2025-06-07 18:18:09,472 - backend_main - ERROR - WebSocket error with 127.0.0.1:52290: WebSocket is not connected. Need to call "accept" first.
2025-06-07 18:18:09,472 - backend_main - INFO - Client disconnected: 127.0.0.1:52290. Remaining connections: 0

üìÑ  Mermaid syntax saved ‚ûú workflow.mmd
üñº  PNG graph saved   ‚ûú workflow.png  (102617¬†bytes)

üîë API Key Configuration
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Please enter your Deepseek API key: 2025-06-07 18:18:11,262 - DataProcessingApp - INFO - Loading data files from /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data
2025-06-07 18:18:11,262 - DataProcessingApp - INFO - Found data file: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data/EFR.csv
2025-06-07 18:18:11,262 - DataProcessingApp - INFO - Found data file: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data/EQR.csv
2025-06-07 18:18:11,263 - DataProcessingApp - INFO - Found data file: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data/SKMS.csv
‚ö†Ô∏è  Running in WebSocket mode - using default API keys

üñº  ASCII graph

                                                                                                                                             +-----------+                                                                                                                                                 
                                                                                                                                             | __start__ |                                                                                                                                                 
                                                                                                                                             +-----------+                                                                                                                                                 
                                                                                                                                                    *                                                                                                                                                      
                                                                                                                                                    *                                                                                                                                                      
                                                                                                                                                    *                                                                                                                                                      
                                                                                                                                          +------------------+...........                                                                                                                                  
                                                                                                                                        ..| first_run_router |......     ....................                                                                                                              
                                                                                                                                 .......  +------------------+      .........                .....................                                                                                         
                                                                                                                        .........                                            ...........                          .....................                                                                    
                                                                                                                 .......                                                                .........                                      .....................                                               
                                                                                                            .....                                                                                ...........                                                ....................                           
                                                                                              +-------------+*******                                                                                        .....                                                               ...........                
                                                                                          ....| human_input |....   ****************                                                                            .                                                                         .                
                                                                               ...........    +-------------+    .......            ***************                                                             .                                                                         .                
                                                                      .........                                         .........                  ****************                                             .                                                                         .                
                                                           ...........                                                           .......                           ***************                              .                                                                         .                
                                                  .........                                                                             .........                                 ****************              .                                                                         .                
                                            ......                                                                                               ....                                        .....******+-------------+                                                       +---------------------+      
                                            .                                                                                                       .                ........................       ....| task_router |                                                       | task_classification |      
                                            .                                                                                               .........................                    ...........    +-------------+****                                                   +---------------------+      
                                            .                                                                       ........................        .                         ...........                                  *****                                                 ...            ...        
                                            .                                              .........................                                .              ...........                                                  *****                                          ..                  ...     
                                            .                      ........................                                                         .        ......                                                                  ****                                    ..                       ..   
                                  +-------------------+................                                                                   +-----------------+.........                                                                   *****                  +-------------------+                  ... 
                                  | router_join_table |.....           ..................................                                 | router_timezone |.........................                                                        *****             | split_query_agent |             .....    
                                ..+-------------------+...  ..........                                   .................................+-----------------+  *******............... .................                                            ******       +-------------------+        .....         
                          ......             *            .....       ...........                                           .......        ..................................        ................. .................                                 *****            *            ......              
                     .....                   *                 .....             ..........                          .......              ..                ..               ........................................   .................                     *****       *       .....                    
                  ...                         *                     ......                 ......                ....                   ..                    ..                    *******                    ..........................................          ***    *    ...                         
+-----------------------+                     *                           ...                   +-----------------+           +--------------+           +---------------+                 ****                                       ........   ................+----------------+                        
| join_table_rag_lookup |                     *                     ......                      | code_generation |           | tz_extractor |******     | tz_rag_lookup |                     *                                   .......                       | llm_first_pass |                        
+-----------------------+*                   *                 .....                            +-----------------+           +--------------+      *****+---------------+******                *                            ......                              +----------------+                        
                          ******             *            .....                                           *                                                    ***********      ******           *                    .......                                                                              
                                *****       *       ......                                                *                                                               *********** ******      *            .......                                                                                     
                                     ***    *    ...                                                      *                                                                          ****** ***    *       ....                                                                                            
                                  +------------------+                                              +---------+                                                                    +---------------------------------+                                                                                     
                                  | join_table_check |                                              | __end__ |                                                                    | existence_and_column_type_check |                                                                                     
                                  +------------------+                                              +---------+                                                                    +---------------------------------+                                                                                     2025-06-07 18:18:11,676 - backend_main - INFO - Created DataProcessingApp instance for client 127.0.0.1:52292
2025-06-07 18:18:11,677 - backend_main - INFO - Client connected: 127.0.0.1:52292. Total connections: 1
2025-06-07 18:18:17,338 - DataProcessingApp - INFO - Loading data files from /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data
2025-06-07 18:18:17,338 - DataProcessingApp - INFO - Found data file: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data/EFR.csv
2025-06-07 18:18:17,339 - DataProcessingApp - INFO - Found data file: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data/EQR.csv
2025-06-07 18:18:17,339 - DataProcessingApp - INFO - Found data file: /Users/xingyugong/GenAI_Nasdaq/GenAI_Nasdaq/01_Data/SKMS.csv

üìÑ  Mermaid syntax saved ‚ûú workflow.mmd
üñº  PNG graph saved   ‚ûú workflow.png  (102617¬†bytes)

üñº  ASCII graph

                                                                                                                                            +-----------+                                                                                                                                  
                                                                                                                                            | __start__ |                                                                                                                                  
                                                                                                                                            +-----------+                                                                                                                                  
                                                                                                                                                  *                                                                                                                                        
                                                                                                                                                  *                                                                                                                                        
                                                                                                                                                  *                                                                                                                                        
                                                                                                                                        +------------------+                                                                                                                               
                                                                                                                                 .......| first_run_router |..........                                                                                                                     
                                                                                                                 ................       +------------------+          ....................                                                                                                 
                                                                                                  ...............                                        ...                              ...................                                                                              
                                                                                  ................                                                          ..                                               ...................                                                           
                                                                  ................                                                                            ..                                                                ....................                                       
                                                          ........                                                                                        +-------------+*******                                                                    ..........                             
                                                          .                                                                                           ....| human_input |...... *************                                                                .                             
                                                          .                                                                                 ..........    +-------------+      ...........   *************                                                   .                             
                                                          .                                                                       ..........                                              ...........     ************                                       .                             
                                                          .                                                             ..........                                                                   ..........       *************                          .                             
                                                          .                                                   ..........                                                                                       ...........         *************             .                             
                                              +---------------------+                                   ......                                                                                                            ......           .....*****+-------------+                       
                                              | task_classification |                                   .                                                                                                             .....................          | task_router |                       
                                              +---------------------+                                   .                                                                                      .......................         .                 ....+-------------+                       
                                                 ...            ...                                     .                                                                 .....................                                .            .....            *                             
                                               ..                  ...                                  .                                          .......................                                                     .       .....                 *                             
                                             ..                       ..                                .                     .....................                                                                            .    ...                      *                             
                                +-------------------+                   .....                 +-------------------+...........                                                                                        +-----------------+          ***********                             
                                | split_query_agent |*******                 ........ ........| router_join_table |.                                                                                        ..........| router_timezone |**********                                        
                                +-------------------+       ********.........................*+-------------------+ ........                                                           ........................*****..+-----------------+...  *********                                    
                                                   .................   ..........************........          ...          .......                              .................................********     .....           .            .....      ***********                         
                                 ..................          ..........             *****************........     ..               ........ .....................*****.............**                      ....                .                 ....             *********                
                        .........                  ..........                  *****                    *****....   ..           ..............***************........                                  ...                    .                     .....                 ***********     
+-----------------------+                     .....                       *****                                +----------------+***********+-----------------+                             +--------------+          +---------------+                   ...                         *****
| join_table_rag_lookup |                     .                     ******                                     | llm_first_pass |           | code_generation |                             | tz_extractor |***       | tz_rag_lookup |                  ..                     *******    
+-----------------------+*                   .                 *****                                           +----------------+           +-----------------+                             +--------------+   *******+---------------+                ..                *******           
                          ******             .            *****                                                                                       *                                                               ********        ***            ..          ********                  
                                *****       .       ******                                                                                            *                                                                       *******    **        ..     *******                          
                                     ***    .    ***                                                                                                  *                                                                              ****  **    ..   ****                                 
                                  +------------------+                                                                                          +---------+                                                                  +---------------------------------+                           
                                  | join_table_check |                                                                                          | __end__ |                                                                  | existence_and_column_type_check |                           
                                  +------------------+                                                                                          +---------+                                                                  +---------------------------------+                           2025-06-07 18:18:17,646 - backend_main - INFO - API keys set for client 127.0.0.1:52292
2025-06-07 18:18:22,268 - backend_main - INFO - Starting query processing for 127.0.0.1:52292: Please join EFR and EQR based on ticker
2025-06-07 18:18:22,270 - DataProcessingApp - INFO - 
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
User query ‚Üí Please join EFR and EQR based on ticker
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
2025-06-07 18:18:22,282 - DataProcessingApp - INFO - ‚ñ∂Ô∏è first_run_router START
2025-06-07 18:18:22,283 - DataProcessingApp - INFO - ‚úì first_run_router END ‚Äî delta:
2025-06-07 18:18:22,284 - DataProcessingApp - INFO - {'routing_decision': 'first_run'}
2025-06-07 18:18:22,284 - DataProcessingApp - INFO - current state:
2025-06-07 18:18:22,286 - DataProcessingApp - INFO - {   'completeness_check_result': False,
    'datetime_columns': None,
    'error': None,
    'execution_summary': None,
    'first_run': True,
    'generated_code': None,
    'historical_response': None,
    'human_message': None,
    'human_response': None,
    'join_column1': None,
    'join_column2': None,
    'missing_info_type': None,
    'needs_human_input': False,
    'original_timezone': None,
    'rag_results': None,
    'routing_decision': 'first_run',
    'table_name': None,
    'table_name1': None,
    'table_name2': None,
    'target_timezone': None,
    'task_length': None,
    'task_list': [],
    'task_query': [],
    'task_step': None,
    'user_query': 'Please join EFR and EQR based on ticker'}
2025-06-07 18:18:22,286 - DataProcessingApp - INFO - ‚ñ∂Ô∏è task_classification START
2025-06-07 18:18:23,382 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-06-07 18:18:30,407 - backend_main - INFO - Received human input from 127.0.0.1:52292: yes
2025-06-07 18:18:30,410 - DataProcessingApp - INFO - ‚úì task_classification END ‚Äî delta:
2025-06-07 18:18:30,411 - DataProcessingApp - INFO - {   'task_length': 1,
    'task_list': ['join_tables'],
    'task_query': ['Please join EFR and EQR based on ticker'],
    'task_step': 1,
    'user_query': 'Please join EFR and EQR based on ticker'}
2025-06-07 18:18:30,411 - DataProcessingApp - INFO - current state:
2025-06-07 18:18:30,412 - DataProcessingApp - INFO - {   'completeness_check_result': False,
    'datetime_columns': None,
    'error': None,
    'execution_summary': None,
    'first_run': True,
    'generated_code': None,
    'historical_response': None,
    'human_message': None,
    'human_response': None,
    'join_column1': None,
    'join_column2': None,
    'missing_info_type': None,
    'needs_human_input': False,
    'original_timezone': None,
    'rag_results': None,
    'routing_decision': 'first_run',
    'table_name': None,
    'table_name1': None,
    'table_name2': None,
    'target_timezone': None,
    'task_length': 1,
    'task_list': ['join_tables'],
    'task_query': ['Please join EFR and EQR based on ticker'],
    'task_step': 1,
    'user_query': 'Please join EFR and EQR based on ticker'}
2025-06-07 18:18:30,413 - DataProcessingApp - INFO - ‚ñ∂Ô∏è llm_first_pass START
2025-06-07 18:18:31,256 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-06-07 18:18:35,518 - DataProcessingApp - INFO - ‚úì llm_first_pass END ‚Äî delta:
2025-06-07 18:18:35,518 - DataProcessingApp - INFO - {'join_column1': 'ticker', 'join_column2': 'ticker', 'table_name1': 'EFR', 'table_name2': 'EQR'}
2025-06-07 18:18:35,518 - DataProcessingApp - INFO - current state:
2025-06-07 18:18:35,519 - DataProcessingApp - INFO - {   'completeness_check_result': False,
    'datetime_columns': None,
    'error': None,
    'execution_summary': None,
    'first_run': True,
    'generated_code': None,
    'historical_response': None,
    'human_message': None,
    'human_response': None,
    'join_column1': 'ticker',
    'join_column2': 'ticker',
    'missing_info_type': None,
    'needs_human_input': False,
    'original_timezone': None,
    'rag_results': None,
    'routing_decision': 'first_run',
    'table_name': None,
    'table_name1': 'EFR',
    'table_name2': 'EQR',
    'target_timezone': None,
    'task_length': 1,
    'task_list': ['join_tables'],
    'task_query': ['Please join EFR and EQR based on ticker'],
    'task_step': 1,
    'user_query': 'Please join EFR and EQR based on ticker'}
2025-06-07 18:18:35,519 - DataProcessingApp - INFO - ‚ñ∂Ô∏è task_router START
2025-06-07 18:18:35,521 - DataProcessingApp - INFO - ‚úì task_router END ‚Äî delta:
2025-06-07 18:18:35,522 - DataProcessingApp - INFO - {'routing_decision': 'execute_join_table_subagent'}
2025-06-07 18:18:35,522 - DataProcessingApp - INFO - current state:
2025-06-07 18:18:35,522 - DataProcessingApp - INFO - {   'completeness_check_result': False,
    'datetime_columns': None,
    'error': None,
    'execution_summary': None,
    'first_run': True,
    'generated_code': None,
    'historical_response': None,
    'human_message': None,
    'human_response': None,
    'join_column1': 'ticker',
    'join_column2': 'ticker',
    'missing_info_type': None,
    'needs_human_input': False,
    'original_timezone': None,
    'rag_results': None,
    'routing_decision': 'execute_join_table_subagent',
    'table_name': None,
    'table_name1': 'EFR',
    'table_name2': 'EQR',
    'target_timezone': None,
    'task_length': 1,
    'task_list': ['join_tables'],
    'task_query': ['Please join EFR and EQR based on ticker'],
    'task_step': 1,
    'user_query': 'Please join EFR and EQR based on ticker'}
2025-06-07 18:18:35,523 - DataProcessingApp - INFO - ‚ñ∂Ô∏è router_join_table START
2025-06-07 18:18:35,524 - DataProcessingApp - INFO - ‚úì router_join_table END ‚Äî delta:
2025-06-07 18:18:35,524 - DataProcessingApp - INFO - {'completeness_check_result': False, 'first_run': True, 'routing_decision': 'join_table_check', 'task_step': 1}
2025-06-07 18:18:35,524 - DataProcessingApp - INFO - current state:
2025-06-07 18:18:35,525 - DataProcessingApp - INFO - {   'completeness_check_result': False,
    'datetime_columns': None,
    'error': None,
    'execution_summary': None,
    'first_run': True,
    'generated_code': None,
    'historical_response': None,
    'human_message': None,
    'human_response': None,
    'join_column1': 'ticker',
    'join_column2': 'ticker',
    'missing_info_type': None,
    'needs_human_input': False,
    'original_timezone': None,
    'rag_results': None,
    'routing_decision': 'join_table_check',
    'table_name': None,
    'table_name1': 'EFR',
    'table_name2': 'EQR',
    'target_timezone': None,
    'task_length': 1,
    'task_list': ['join_tables'],
    'task_query': ['Please join EFR and EQR based on ticker'],
    'task_step': 1,
    'user_query': 'Please join EFR and EQR based on ticker'}
2025-06-07 18:18:35,525 - DataProcessingApp - INFO - ‚ñ∂Ô∏è join_table_check START
2025-06-07 18:18:35,536 - DataProcessingApp - INFO - ‚úì join_table_check END ‚Äî delta:
2025-06-07 18:18:35,536 - DataProcessingApp - INFO - {   'completeness_check_result': True,
    'human_message': 'Join check passed. You may proceed with merging.\n'
                     'Warnings:\n'
                     'This may be a many-to-many join. Expect large row growth.',
    'needs_human_input': False}
2025-06-07 18:18:35,537 - DataProcessingApp - INFO - current state:
2025-06-07 18:18:35,537 - DataProcessingApp - INFO - {   'completeness_check_result': True,
    'datetime_columns': None,
    'error': None,
    'execution_summary': None,
    'first_run': True,
    'generated_code': None,
    'historical_response': None,
    'human_message': 'Join check passed. You may proceed with merging.\n'
                     'Warnings:\n'
                     'This may be a many-to-many join. Expect large row growth.',
    'human_response': None,
    'join_column1': 'ticker',
    'join_column2': 'ticker',
    'missing_info_type': None,
    'needs_human_input': False,
    'original_timezone': None,
    'rag_results': None,
    'routing_decision': 'join_table_check',
    'table_name': None,
    'table_name1': 'EFR',
    'table_name2': 'EQR',
    'target_timezone': None,
    'task_length': 1,
    'task_list': ['join_tables'],
    'task_query': ['Please join EFR and EQR based on ticker'],
    'task_step': 1,
    'user_query': 'Please join EFR and EQR based on ticker'}
2025-06-07 18:18:35,537 - DataProcessingApp - INFO - ‚ñ∂Ô∏è router_join_table START
2025-06-07 18:18:35,538 - DataProcessingApp - INFO - ‚úì router_join_table END ‚Äî delta:
2025-06-07 18:18:35,538 - DataProcessingApp - INFO - {'completeness_check_result': True, 'first_run': True, 'routing_decision': 'done', 'task_step': 1}
2025-06-07 18:18:35,538 - DataProcessingApp - INFO - current state:
2025-06-07 18:18:35,539 - DataProcessingApp - INFO - {   'completeness_check_result': True,
    'datetime_columns': None,
    'error': None,
    'execution_summary': None,
    'first_run': True,
    'generated_code': None,
    'historical_response': None,
    'human_message': 'Join check passed. You may proceed with merging.\n'
                     'Warnings:\n'
                     'This may be a many-to-many join. Expect large row growth.',
    'human_response': None,
    'join_column1': 'ticker',
    'join_column2': 'ticker',
    'missing_info_type': None,
    'needs_human_input': False,
    'original_timezone': None,
    'rag_results': None,
    'routing_decision': 'done',
    'table_name': None,
    'table_name1': 'EFR',
    'table_name2': 'EQR',
    'target_timezone': None,
    'task_length': 1,
    'task_list': ['join_tables'],
    'task_query': ['Please join EFR and EQR based on ticker'],
    'task_step': 1,
    'user_query': 'Please join EFR and EQR based on ticker'}
2025-06-07 18:18:35,539 - DataProcessingApp - INFO - ‚ñ∂Ô∏è code_generation START
2025-06-07 18:18:35,910 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-06-07 18:18:46,139 - DataProcessingApp - INFO - ‚úì code_generation END ‚Äî delta:
2025-06-07 18:18:46,139 - DataProcessingApp - INFO - {   'generated_code': 'import pandas as pd\n'
                      'import sys\n'
                      '\n'
                      'try:\n'
                      '    # Load datasets\n'
                      "    efr = pd.read_csv('01_Data/EFR.csv')\n"
                      "    eqr = pd.read_csv('01_Data/EQR.csv')\n"
                      '    \n'
                      "    # Perform inner join on 'ticker'\n"
                      "    joined_df = pd.merge(efr, eqr, on='ticker', how='inner')\n"
                      '    \n'
                      '    # Save the result\n'
                      "    joined_df.to_csv('joined_output.csv', index=False)\n"
                      '    \n'
                      'except FileNotFoundError as e:\n'
                      '    print(f"Error: {e}")\n'
                      '    sys.exit(1)\n'
                      'except Exception as e:\n'
                      '    print(f"Error: {e}")\n'
                      '    sys.exit(1)'}
2025-06-07 18:18:46,140 - DataProcessingApp - INFO - current state:
2025-06-07 18:18:46,140 - DataProcessingApp - INFO - {   'completeness_check_result': True,
    'datetime_columns': None,
    'error': None,
    'execution_summary': None,
    'first_run': True,
    'generated_code': 'import pandas as pd\n'
                      'import sys\n'
                      '\n'
                      'try:\n'
                      '    # Load datasets\n'
                      "    efr = pd.read_csv('01_Data/EFR.csv')\n"
                      "    eqr = pd.read_csv('01_Data/EQR.csv')\n"
                      '    \n'
                      "    # Perform inner join on 'ticker'\n"
                      "    joined_df = pd.merge(efr, eqr, on='ticker', how='inner')\n"
                      '    \n'
                      '    # Save the result\n'
                      "    joined_df.to_csv('joined_output.csv', index=False)\n"
                      '    \n'
                      'except FileNotFoundError as e:\n'
                      '    print(f"Error: {e}")\n'
                      '    sys.exit(1)\n'
                      'except Exception as e:\n'
                      '    print(f"Error: {e}")\n'
                      '    sys.exit(1)',
    'historical_response': None,
    'human_message': 'Join check passed. You may proceed with merging.\n'
                     'Warnings:\n'
                     'This may be a many-to-many join. Expect large row growth.',
    'human_response': None,
    'join_column1': 'ticker',
    'join_column2': 'ticker',
    'missing_info_type': None,
    'needs_human_input': False,
    'original_timezone': None,
    'rag_results': None,
    'routing_decision': 'done',
    'table_name': None,
    'table_name1': 'EFR',
    'table_name2': 'EQR',
    'target_timezone': None,
    'task_length': 1,
    'task_list': ['join_tables'],
    'task_query': ['Please join EFR and EQR based on ticker'],
    'task_step': 1,
    'user_query': 'Please join EFR and EQR based on ticker'}
2025-06-07 18:18:59,512 - backend_main - INFO - Client disconnected: 127.0.0.1:52292. Remaining connections: 0
